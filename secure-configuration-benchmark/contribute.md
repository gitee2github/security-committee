# 建设说明

本目录承载openEuler安全配置规范的基线文本内容，所有基于openEuler进行开发的安全配置基线，均应在目录下对应的规范文档中进行开发建设，并符合约定。

# 格式约定

- 目录结构
  
  - 按照安全配置基线分类建设不同的目录，基线条目在不同的目录下进行建设；
  - **一个md文档只承载一个安全配置基线条目**，有两个原因：
    - 不同条目分不同目录和文件，便于社区共同开发维护；
    - 便于不同用户在不同场景下根据自身需要，提取不同的规范条目组成新规范集合；
  - 目录名字格式：编号 + “_” + 目录文字，编号根据不同目录层级通过 “.” 号级联，比如：1\_initial\_deployment，1.2\_software；
  - 安全配置基线条目md文件名字格式：编号 + “_” + 条目文字，编号基于目录编号级联，比如：1.2.1\_FTP\_not\_installed；
  - 目录、文件名字均使用小写英文（除非业界标准的缩写），单词之间通过下划线 “_" 连接；
  
- 安全配置基线条目结构

  - 每一个安全配置基线条目，必须符合“格式要求”；

  - 条目内容建议使用中文建设；

  - 格式要求：
    - 标题：标题包含统一的编号 + 空格 + 标题中文文字，字体加粗，不换行；编号基于目录编号级联，所在md文件名中的编号同标题中编号一致；
    - 级别：用于表示当前条目所属的重要级别，当前分为两级：**“要求” 表示核心配置，通常情况下必须满足；“建议” 表示建议配置**，对于高安全要求的系统，建议满足；
    - 适用版本：文本方式表示该条目适用哪些openEuler版本，默认值是 “全部”，可以是 “20.03 LTS，22.03 LTS” 等，安全配置基线文档首次构建时，所有条目均应该是“全部”，之后在配置规范维护、新增过程中，如果不同openEuler版本，存在不同要求，则根据条目适用范围，对此字段进行修订，各版本号之间用逗号分割，版本号和“全部”互斥。注意：**配置规范仅针对各openEuler LTS版本进行设计维护，所以本字段不允许出现非LTS版本号**；
    - 规则说明：文本描述，用于说明该规则的要求、背景、影响范围，此处行文不做限制，但务必说明清晰、正确；
    - 检查方法：文本描述 + 命令脚本，用于表示在系统中通过什么方式检查该规则是否满足；
    - 修复方法：文本描述 + 命令脚本，用于表示在系统中通过什么方式修复、配置该规则，使之满足基线要求；
    
  - 举例：

    **1.2.1 禁止安装FTP服务**

    **级别：** 要求

    **适用版本：** 全部

    **规则说明：** FTP（File Transfer Protocol，文件传输协议），提供Linux服务器同其他服务器、桌面系统、终端设备之间的文件传输功能。FTP协议本身不支持加密传输，数据传输过程中容易被攻击者窃取，所以禁止安装FTP服务。未安装FTP服务的设备，无法对外提供FTP服务，如业务需要进行文件传输，可以通过SFTP服务进行替代。
    
    **检查方法：**
可通过如下命令检查是否安装了FTP软件，如果命令返回为空，表示未安装：
    
    ```bash
    # rpm -q "ftp"
    package ftp is not installed
    ```
    
    **修复方法：**
对于已经安装了FTP软件的系统，可以通过yum或dnf命令进行卸载：
    
    ```bash
    # yum remove ftp
    或
    # dnf remove ftp
    ```

# 修订约定

- 安全配置规范以两位版本号进行版本控制，以“a.b”方式表达，其中a为大版本号，b为小版本号，如：1.0，2.0，2.1等，版本文件放置在配置规范基线根目录下，命名为version.md；
- **在安全配置规范大版本生命周期内升级**，比如从1.0升级到1.1，为避免规范在使用过程中出现同编号，不同条目内容，或者反之的混乱场景，在此约定：
  - 规范条目一旦被制定，**编号不能被修改**；
  - 规范条目如果被删除，对应**编号不能被其他条目再次使用**；
  - 新增规范条目，只能在原规范条目末尾累增目录或条目编号，**不能使用历史已使用编号**；
  - 为避免删除的规范条目在后续建设过程中被重新提及，以及避免删除条目的编号被重新使用，在此约定：
    - 规范条目如果被删除，**对应md文件不做删除处理**，在文件内容的标题后添加中文括弧和中文“废弃”字样，如：**1.2.1 禁止安装FTP服务（废弃）**，将该md文件名修改为原文件名加上英文字符括号和英文“abandoned”字样，如：1.2.1\_FTP\_not\_installed(abandoned);
    - 如果目录下所有条目均已被废弃，则该目录可以被废弃，添加“abandoned“字样，如：1.2\_software(abandoned)；
- **在安全配置规范跨大版本升级时**，比如从1.1升级到2.0，允许规范目录结构、条目编号变更，可删除已废弃目录和条目；

# 编译

- 安全配置规范文本内容本身不需要编译，社区开发者在对配置规范进行修订以后，可以通过工具（待开发）将分散的md文件合并为一个md文件，并提交社区（位置待定）；
- 社区开发者在对配置规范进行修订以后，需要在社区项目**[scap-security-guide](https://gitee.com/src-openeuler/scap-security-guide)**中添加或修改对应的yaml、xml等配置文件，确保新增修订可以在工具上对应体现；
- scap-security-guide开发指导如下（待完善）：

# 版本控制

  - 安全配置基线主线版本整体不区分openEuler版本，个别条目可通过文本方式注明所适用的LTS版本；
  - 针对不同发行版本，可基于主线版本进行增删定制后发行；